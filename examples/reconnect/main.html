<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Sockizy: start</title>
        <meta charset="utf-8">
    </head>

    <body></body>

    <script src="http://localhost:1337"></script>
    <script>
        const socket = io("localhost:1337/");

        //-----------------------------------------------------

        socket.packets(
            null,
            null,
            {
                "call": null,
                "terminate": null,
                "badPacket": null
            }
        );

        //-----------------------------------------------------

        socket.on("open", function() {
            console.log("event: open");

            socket.emit("call");

            setTimeout(function() {
                socket.disconnect(4500, "test");
            }, 1000 * 2);

            setTimeout(function() {
                socket._reconnect(); // ~/test
            }, 1000 * 3);
        });

        socket.on("close", function(code, reason) {
            console.log("event: close |", code, reason);
        });

        socket.on("disconnected", function() {
            console.log("event: disconnected");
        });

        socket.on("terminated", function() {
            console.log("event: terminated");
        });


        socket.on("message", function() {
            console.log("event: message");
        });

        socket.on("error", function(error) {
            console.log("event: error |", error);
        });

        //---------------)>

        socket.on("packet", function(name, data, accept) {
            console.log("socket.packet: " + name + " |---v");

            accept();
        });
    </script>
</html>
